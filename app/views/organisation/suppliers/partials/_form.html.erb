<%= form_for supplier, url: new_or_create ? organisation_suppliers_path : organisation_supplier_path, method: new_or_create ? :post : :patch do |form| %>
  <div class="wizard-body">
    <div class="wizard-header my-4 border-bottom pb-4">
      <h4 class="mb-4 font-weight-bold"><%= new_or_create ? 'Add a new supplier' : 'Edit supplier' %></h4>
      <p class="font-400 font-14">
        Please use this form to create a new supplier record in OpRes. A supplier can be a
        system that is hosted and delivered internally within your organisation. Alternatively, it
        can be a 3rd or 4th party supplier providing technology, software or resource capability to
        your organisation
      </p>
    </div>
     <h5 class="font-600">Supplier details</h5>
    <div class="mt-5">
      <div class="input-fields mb-5 pb-5 border-bottom">
        <div class="row align-items-center">
          <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
            <p class="text-capitalize font-14 font-600">supplier name</p>
          </div>
          <div class="col-sm-7 order-3 order-sm-2">
            <%= form.text_field :name, placeholder: 'Supplier Name', required: true, class: 'w-100 form-control font-12 h-auto py-3 shadow-none' %>
          </div>
          <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
            <div class="info" data-toggle="tooltip" data-placement="top" title="Please provide the supplier name" aria-hidden="true">i</div>
          </div>
        </div>
        <div class="row align-items-center mt-4">
          <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
            <p class="text-capitalize font-14 font-600">cloud hosting provider</p>
          </div>
          <div class="col-sm-7 order-3 order-sm-2">
          <%= form.select :cloud_hosting_provider_id, options_for_select(@cloud_hosting_providers.map { |cloud_hosting_provider| [cloud_hosting_provider.name, cloud_hosting_provider.id] }, @supplier&.cloud_hosting_provider&.id ),
            { include_blank: 'Please select Cloud Hosting Provider' }, required: true, class: 'form-control w-100 font-12 h-auto py-3 shadow-none arrow-select' %>
          <i class="fa fa-sort-desc pr-2 mr-2" aria-hidden="true"></i>
          </div>
          <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
            <div class="info" data-toggle="tooltip" data-placement="top" title="Please select a cloud hosting provider" aria-hidden="true">i</div>
          </div>
        </div>
        <div class="checkboxes-field mt-4">
          <div class="row align-items-center">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600 text-capitalize">contracting terms</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="checkbox-container d-flex justify-content-start other-reason-container">
                <div class="d-flex align-items-center mr-2 form-group mb-2 pl-0 flex-wrap justify-content-between">
                  <% Supplier.contracting_terms.each do |key, val| %>
                    <div class="col-sm-6 mb-3 form-check">
                      <label class="radio-check d-flex p-0 align-items-center">
                        <%= form.radio_button :contracting_terms, key, id: "contracting-terms-#{key}", class: 'other-reason-selection' %>
                        <%= form.label key.titleize, class: 'mb-0 ml-2 font-12 text-capitalize order-2 ml-2', for: "contracting-terms-#{key}" %>
                        <div class="checkmark position-relative order-1"></div>
                      </label>
                    </div>
                  <% end %>
                  <div class="col-sm-6 mb-3">
                    <%= form.text_field :contracting_terms_other, class: 'form-control other-reason-field', placeholder: 'Please Specify' %>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="Please select how you contract for the service" aria-hidden="true">i</div>
            </div>
          </div>
        </div>
        <div class="date-selection position-relative mt-3">
          <div class="row align-items-center">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600 text-capitalize">Start Date</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="position-relative">
                <%= form.text_field :start_date, value: @supplier&.start_date&.strftime("%d-%m-%Y"), class: 'datepicker w-100 form-control font-12 h-auto py-3 shadow-none', placeholder: 'dd/mm/yyyy', autocomplete: 'off' %>
                <i class="fa fa-calendar font-12 position-absolute right-0-vertical-50 mr-2" aria-hidden="true"></i>
              </div>
            </div>
          </div>

          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600 text-capitalize">End Date</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="position-relative">
                <%= form.text_field :end_date, value: @supplier&.end_date&.strftime("%d-%m-%Y"), class: 'datepicker w-100 form-control font-12 h-auto py-3 shadow-none', placeholder: 'dd/mm/yyyy', autocomplete: 'off'%>
                <i class="fa fa-calendar font-12 position-absolute right-0-vertical-50 mr-2" aria-hidden="true"></i>
              </div>


            </div>
          </div>
          <div class="info position-absolute right-0-vertical-50" data-toggle="tooltip" data-placement="top" title="Please feel free to add a start and end date for your agreement with this supplier" aria-hidden="true">i</div>
        </div>

        <%= form.fields_for :relationship_owner do |relationship_owner| %>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Relationship Owner Name</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
                <%= relationship_owner.text_field :name, placeholder: 'Relationship Owner', class:'w-100 form-control font-12 h-auto py-3 shadow-none' %>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="Please provide the details of the relationship owner in your organisation" aria-hidden="true">i</div>
            </div>
          </div>

           <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Relationship Owner Email</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <%= relationship_owner.email_field :email, placeholder: 'Relationship Owner Email', class:'w-100 form-control font-12 h-auto py-3 shadow-none' %>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="Please provide the details of the relationship owner in your organisation" aria-hidden="true">i</div>
            </div>
          </div>
        <% end %>
        <div class="row align-items-center mt-4">
          <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
            <p class="text-capitalize font-14 font-600">Key Contacts</p>
          </div>
          <div class="col-sm-7 order-3 order-sm-2 key-contacts-select2">
            <%= form.select :key_contacts_ids, options_for_select(@key_contacts.map { |key_contact| [key_contact.name, key_contact.id] }, form.object.key_contacts_ids), { include_blank: 'Select Key Contact' }, class: 'form-control w-100 font-12 h-auto py-3 shadow-none select2 supplier-key-contact-selector', id: 'supplier-key-contact-select2', multiple: true %>
          </div>
          <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
            <div class="info" data-toggle="tooltip" data-placement="top" title="Please provide the details of key contacts within this supplier" aria-hidden="true">i</div>
          </div>
        </div>
        <hr>
        <%= form.fields_for :supplier_social_accounts do |supplier_social_account| %>
          <%= render 'organisation/suppliers/partials/social_account_fields', f: supplier_social_account %>
        <% end %>
        <hr>
        <div class="row align-items-center mt-4 ">
          <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
            <p class="text-capitalize font-14 font-600">region</p>
          </div>
          <div class="col-sm-7 order-3 order-sm-2 load-countries-from-region"
            data-append-countries-to="countries-dropdown"
            data-country-param-name="supplier[country_unit]"
          >
            <% selected_regional_unit = @supplier.unit&.selected_regional_unit %>
            <%= render '/organisation/unit_hierarchys/partials/drop_down', param_name: 'supplier[region]', options: Unit.regional_unit_dropdown(managing_units), val: selected_regional_unit&.id, prompt_message: 'Select your region' %>
          </div>
          <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
            <div class="info" data-toggle="tooltip" data-placement="top" title="region" aria-hidden="true">i</div>
          </div>
        </div>
        <div class="row align-items-center mt-4">
          <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
            <p class="text-capitalize font-14 font-600">country</p>
          </div>
          <div class="col-sm-7 order-3 order-sm-2" id="countries-dropdown">
            <% selected_country_unit = @supplier.unit&.selected_country_unit %>
            <%= render 'organisation/unit_hierarchys/partials/drop_down', param_name: 'supplier[country_unit]', options: (selected_regional_unit&.country_unit_dropdown || []), val: selected_country_unit&.id, prompt_message: 'Select your country' %>
          </div>
          <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
            <div class="info" data-toggle="tooltip" data-placement="top" title="country" aria-hidden="true">i</div>
          </div>
        </div>
      </div>
      <%= form.fields_for :sla do |supplier_sla| %>
        <div class="input-fields mb-5 pb-5 border-bottom">
          <h5 class="font-600">Supplier Obligations</h5>
          <div class="row align-items-center mt-5">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">contracted service level agreement</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12">%</div>
                </div>
                 <%= supplier_sla.number_field :service_level_agreement, placeholder: 'Enter Target', id: 'inlineFormInputGroup', class: 'form-control form-control font-12 h-auto py-3 shadow-none' %>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="Please input your SLA with this supplier" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">contracted service level objective</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12">%</div>
                </div>
                <%= supplier_sla.number_field :service_level_objective, placeholder: 'Enter Target', id: 'inlineFormInputGroup', class: 'form-control form-control font-12 h-auto py-3 shadow-none' %>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="Please input your SLO with this supplier" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">contracted recovery time objective</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
                <%= supplier_sla.number_field :recovery_time_objective, placeholder: 'Enter Target', id: 'inlineFormInputGroup', class: 'form-control form-control font-12 h-auto py-3 shadow-none' %>
              </div>              </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="Please input your RTO with this supplier" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">contracted recovery point objective</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
                <%= supplier_sla.number_field :recovery_point_objective, placeholder: 'Enter Target', id: 'inlineFormInputGroup', class: 'form-control form-control font-12 h-auto py-3 shadow-none' %>
              </div>              </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="Please input your RPO with this supplier" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 1 Response Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
                <%= supplier_sla.number_field :severity1, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 2 Response Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
                <%= supplier_sla.number_field :severity2, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 3 Response Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
               <%= supplier_sla.number_field :severity3, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 4 Response Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
                <%= supplier_sla.number_field :severity4, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 1 Restoration of Service Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
               <%= supplier_sla.number_field :severity1_restoration, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 2 Restoration of Service Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>

              <%= supplier_sla.number_field :severity2_restoration, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 3 Restoration of Service Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
                <%= supplier_sla.number_field :severity3_restoration, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="row align-items-center mt-4">
            <div class="col-sm-4 flex-sm-1 mb-2 mb-sm-0">
              <p class="text-capitalize font-14 font-600">Contracted Severity 4 Restoration of Service Time</p>
            </div>
            <div class="col-sm-7 order-3 order-sm-2">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text px-3 bg-white font-12 text-capitalize">minutes</div>
                </div>
                <%= supplier_sla.number_field :severity4_restoration, placeholder:'Enter Target', class: 'form-control form-control font-12 h-auto py-3 shadow-none', id: 'inlineFormInputGroup'%>
              </div>
            </div>
            <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0">
              <div class="info" data-toggle="tooltip" data-placement="top" title="contracted recovery point object" aria-hidden="true">i</div>
            </div>
          </div>
          <div class="checkboxes-field mt-4">
            <div class="row align-items-center">
              <div class="col-sm-4 flex-sm-1 align-self-start">
                <p class="text-capitalize font-14 font-600 text-capitalize">Support hours</p>
              </div>
              <div class="col-sm-7 order-3 order-sm-2 mt-sm-0 mt-3">
                <div class="row other-reason-container">
                  <% Sla.support_hours.each do |key, val| %>
                    <div class="col-sm-6 mb-3 form-check">
                      <label class="radio-check d-flex p-0 align-items-center">
                        <%= supplier_sla.radio_button :support_hours, key, id: "support-hours-#{key}", class: 'other-reason-selection' %>
                        <%= supplier_sla.label key.titleize, class: 'mb-0 ml-2 font-12 text-capitalize order-2 ml-2', for: "support-hours-#{key}" %>
                        <div class="checkmark position-relative order-1"></div>
                      </label>
                    </div>
                  <% end %>
                  <div class="col-sm-6 mb-3">
                    <%= supplier_sla.text_field :support_hours_other, class: 'form-control other-reason-field', placeholder: 'Please Specify' %>
                  </div>
                </div>
              </div>
              <div class="col-sm-1 text-right order-2 flex-sm-half mb-2 mb-sm-0 align-self-start">
                <div class="info" data-toggle="tooltip" data-placement="top" title="Please confirm the support hours agreement for this supplier" aria-hidden="true">i</div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
      <div class="wizard-btn d-flex d-sm-block justify-content-between flex-column">
        <%= form.submit 'Save & Add Supplier', class: 'btn btn-light-grey btn-sm font-600 text-capitalize font-12 float-right btn-light-grey' %>
      </div>
    </div>
  </div>
<% end %>
